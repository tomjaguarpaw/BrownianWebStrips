{
\section{Recovering the Brownian web from its strips}
\label{sec:recovering-from-strips}

The next step towards proving Theorem \ref{thm:bw-2d-black-noise} is
to show that the $\sigma$-field associated to a horizontal strip is
generated by those $\sigma$-fields associated to any two substrips
which partition the larger strip.
\TODO{}{This phrasing may be a bit clumsy}

We define a $\sigma$-field $\factor{y}{z}$ for each $y < z \in
[-\infty, \infty]$ which corresponds to the information contained in
the trajectories of the Brownian web in the horizontal strip
$(-\infty, \infty) \cross (y,z)$.

\newcommand{\brownianwebnoise}{collection of horiztontal
  sub-$\sigma$-fields of the Brownian web}

\begin{definition}
  \newcommand{\T}{\stripleavetime{f}}
  \label{def:restrict}
  From a path $f : [s, \infty) \to \R$ we define ``$f$ stopped on
    leaving the interval $(a,b)$'' to be the map $\restrict{a}{b}{f} : [s,
      \infty) \to \R$ given by $\restrict{a}{b}{f}(t) = f(t \minsym \T)$
      where $\T = \inf\{ t : f(t) \not\in (a,b) \}$.

  \label{def:horizontal-factorization}
  The \brownianwebnoise{} is an
  association of a $\sigma$-field $\factor{y}{z}$ to each $(y, z)
  \in \simplex$, generated by the following collection of paths:
  $\{ \restrict{y}{z}{t \mapsto \web{s}{t}{x}} : s, x \in \R \}$
\end{definition}

\TODO{}{Note that the path $f$ may start outside the strip, in which
  case we consider it stopped immediately.}

With these definitions, $\upperhp$ of Section \ref{sec:recovering-from-half-planes} is
$\commafactor{0}{\infty}$ and $\lowerhp$ is
$\commafactor{-\infty}{0}$.

\begin{observation}
  Note that $\factor{w}{x}$ and $\factor{y}{z}$ are independent if the
  intervals $(w,x)$ and $(y,z)$ are disjoint.
\end{observation}

\renewcommand{\top}{b}
\newcommand{\bottom}{a}

\begin{theorem}\label{thm:recoveringfromstrips}
  $\factor{x}{z} = \factor{x}{y} \tensor \factor{y}{z}$ for all $x < y < z$
\end{theorem}

In the rest of this
section we fix $\bottom < 0 < \top$ and write $\Res{\cdot}$ for
$\restrict{\bottom}{\top}{\cdot}$.
$\factor{a}{b}$ is generated by processes of the form $\Res{\sampled}$;
without loss of generality we can take $y=0$; and $a$ and $b$ are arbitrary; thus
the theorem reduces to the following lemma.

\begin{lemma}
  $\Res{\sampled}$ is $\factor{\bottom}{0} \tensor
  \factor{0}{\top}$-measurable.
\end{lemma}

\newcommand{\Resresamplede}{\Res{\resamplede}}
\newcommand{\Ressampled}{\Res{\sampled}}

Note that $\Resresamplede$ is what you obtain when you perform the
procedure of Definition \ref{def:resamplede} on paths in the
$(\bottom,0)$-strip and the $(0,\top)$-strip, rather than the upper and lower
half-planes.  The $\reservoir$-measurable Brownian motion is still used to
cross the gap between the strips, which is at level $0$.

Like in Section \ref{sec:recovering-from-half-planes}, $\Resresamplede$
is constructed from information in $\factor{\bottom}{0}$,
$\factor{0}{\top}$ and $\reservoir$ only.
Formally,
  $\Res{\resamplede}$ is $\factor{\bottom}{0} \tensor \factor{0}{\top}
  \tensor \reservoir$-measurable.

Furthermore, we will show that as $\epsilon \to 0$ we have that
$\Resresamplede$ approaches $\Ressampled$.  We could show this
directly by an extension of the argument we used for the half-planes
in Section \ref{sec:recovering-from-half-planes}.  However, knowing that
$\resamplede \toinP \sampled$ is nearly enough, and all that is required
in addition is to show that this convergence is preserved by the
restriction map $\Res{\cdot}$.

\begin{lemma}
    \label{lem:resamplede-to-sampled-strip}
    $\Res{\resamplede} \toinP \Res{\sampled}$ as $\epsilon \to 0$
\end{lemma}

To show that the convergence is preserved we use the following
straightforward result in classical analysis.

\newcommand{\stripleavetimenotturningpoint}[1]{$\stripleavetime{#1}$ is
  not a turning point of the path $#1$}

\begin{lemma}
  \label{lem:Res-continuous-ae}
  If \stripleavetimenotturningpoint{f},
  then the map $f \mapsto \Res{f}$ is continuous at $f$ in the
  topology of uniform convergence on compacts.
\end{lemma}

\newcommand{\commenttom}[1]{}
\commenttom{
\DOTHIS{}{We decided to omit this proof -- ohad and tom
\DOTHIS{We sketch a proof.
\begin{proof}
    \newcommand{\fn}{f_n}

    \newcommand{\T}{\stripleavetime{f}}
    \newcommand{\Tn}{\stripleavetime{\fn}}
    \newcommand{\starttime}{s}

    Suppose $\fn \to f$ uniformly on compacts, and both are paths
    starting at time $\starttime$.

    If $\T = \infty$ there is very little to prove, so suppose
    otherwise.  Then since $\T$ is not
    a turning point of $f$ it is easily seen that $\Tn \to \T$ and
    that eventually \DOTHIS{$\fn(\Tn) = f(\T)$}{They both take the value
      either $\bottom$ or $\top$ -- or both of them start outside the
      strip}.

    \renewcommand{\d}{\delta}
    \newcommand{\e}{\epsilon}

    Since $f$ is continuous, choose $\d$ such that
    $|f(\T) - f(x)| \le \epsilon$ when
    $|\T - x| \le \delta$.  Eventually
    \begin{itemize}
    \item $\fn(\Tn) = f(\T)$
    \item $|\Tn - \T| \le \d$
    \item $|\fn - f| \le \e$ uniformly on some compact containing
      $[\starttime, \T+\d]$.
    \end{itemize}

    \newcommand{\stoppedfn}{\Res{\fn}}
    \newcommand{\stoppedf}{\Res{f}}

    \newcommand{\condition}[2]{for $t \in {#1}$ we have
      $|\stoppedfn(t) - \stoppedf(t)| #2$}
    so
    \begin{itemize}
    \item \condition{[\starttime, \T-\d)}{\le \e}
    \item \condition{[\T-\d, \T+\d]}{\le 2\e}
    \item \condition{(\T+\d, \infty)}{= 0}
    \end{itemize}
    so indeed $\stoppedfn \to \stoppedf$ uniformly on compacts.}
      {The only tricky part is the second item.  There are
      four cases to consider.  The worst case is when $\stoppedf$ has
      been truncated and $\stoppedfn$ hasn't.  But $\stoppedf$ is
      equal to the level, and so is within $\e$ of $f$.  OTOH
      $\stoppedfn = \fn$ so is within $\e$ of $f$.  Thus the $2\e$
      bound.}
\end{proof}
}}

\begin{proof}[Proof of Lemma \ref{lem:resamplede-to-sampled-strip}]
  We already know that $\resamplede \toinP \sampled$.  In addition
  $\sampled$ is a Brownian motion so almost surely
  satisfies the condition of Lemma \ref{lem:Res-continuous-ae}, that
  ``\stripleavetimenotturningpoint{\sampled}''.
  We conclude that $\Res{\resamplede} \toinP
  \Res{\sampled}$ by the continuous mapping theorem (see for
  example \cite{billingsley}, p. 21, Theorem 2.7).
\end{proof}
}
