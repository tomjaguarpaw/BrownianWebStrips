{
\section{Recovering the Brownian web from its strips}

We will define a $\sigma$-algebra $\factor{y}{z}$ for each $y < z \in
[-\infty, \infty]$ which corresponds to the information contained in
the trajectories of the Brownian web in the horizontal strip
$(-\infty, \infty) \cross (y,z)$.

\begin{definition}
  \newcommand{\T}{\stripleavetime{f}}
  \label{def:restrict}
  From a path $f : [s, \infty) \to \R$ we define ``$f$ stopped on
    leaving the interval $(a,b)$'' to be the map $\restrict{a}{b}{f} : [s,
      \infty) \to \R$ given by $\restrict{a}{b}{f}(t) = f(t \minsym \T)$
      where $\T = \inf\{ t : f(t) \not\in (a,b) \}$.
\end{definition}

\TODO{}{Note that the path $f$ may start outside the strip, in which
  case we consider it stopped immediately.}

\newcommand{\brownianwebnoise}{collection of horiztontal
  sub-$\sigma$-algebras of the Brownian web}

\begin{definition}
  The \brownianwebnoise{} is an
  association of a $\sigma$-algebra $\factor{y}{z}$ to each $(y, z)
  \in \simplex$, generated by the following collection of paths:
  $\{ \restrict{y}{z}{t \mapsto \web{s}{t}{x}} : s, x \in \R \}$
\end{definition}

With these definitions, $\upperhp$ of Section \ref{recovering-from-half-planes} is
$\commafactor{0}{\infty}$ and $\lowerhp$ is
$\commafactor{-\infty}{0}$.

\begin{observation}
  Note that $\factor{w}{x}$ and $\factor{y}{z}$ are independent if the
  intervals $(w,x)$ and $(y,z)$ are disjoint.
\end{observation}

\renewcommand{\top}{b}
\newcommand{\bottom}{a}

For notational convenience in the rest of this
section we will fix $\bottom < 0 < \top$ and write $\Res{\cdot}$ for
$\restrict{\bottom}{\top}{\cdot}$.

\newcommand{\Resresamplede}{\Res{\resamplede}}
\newcommand{\Ressampled}{\Res{\sampled}}

The collection of variables of the form $\Ressampled$ generates
$\factor{\bottom}{\top}$, and the aim is to show that in fact each $\Ressampled$ can
be recovered from information in $\factor{\bottom}{0}$ and $\factor{0}{\top}$
only.

Note that $\Resresamplede$ is what you obtain when you perform the
procedure of Definition \ref{def:resamplede} on paths in the
$(\bottom,0)$-strip and the $(0,\top)$-strip, rather than the upper and lower
half-planes.  The $\reservoir$-measurable Brownian motion is still used to
cross the gap between the strips, which is at level $0$.

Like in Section \ref{recovering-from-half-planes}, $\Resresamplede$
is constructed from information in $\factor{\bottom}{0}$,
$\factor{0}{\top}$ and $\reservoir$ only.

\begin{observation}
  $\Res{\resamplede}$ is $\factor{\bottom}{0} \tensor \factor{0}{\top}
  \tensor \reservoir$-measurable.
\end{observation}

Furthermore, we will show that as $\epsilon \to 0$ we have that
$\Resresamplede$ approaches $\Ressampled$.  We could show this
directly by an extension of the argument we used for the half-planes
in Section \ref{recovering-from-half-planes}.  However, knowing that
$\resamplede \toinP \sampled$ is nearly enough, and all that is required
in addition is to show that this convergence is preserved by the
restriction map $\Res{\cdot}$.

To show that the convergence is preserved we use the following
property of the restriction map.

\newcommand{\stripleavetimenotturningpoint}[1]{$\stripleavetime{#1}$ is
  not a turning point of the path $#1$}

\begin{lemma}
  \label{lem:Res-continuous-ae}
  If \stripleavetimenotturningpoint{f},
  then the map $f \mapsto \Res{f}$ is continuous at $f$ in the
  topology of uniform convergence on compacts.
\end{lemma}

\begin{proof}
  \DOTHIS{We sketch a proof of this straightforward result in
    classical analysis.

    \newcommand{\fn}{f_n}

    \newcommand{\T}{\stripleavetime{f}}
    \newcommand{\Tn}{\stripleavetime{\fn}}
    \newcommand{\starttime}{s}

    Suppose $\fn \to f$ uniformly on compacts, and both are paths
    starting at time $\starttime$

    If $\T = \infty$ there is very little to prove, so suppose
    otherwise.  Then since $\T$ is not
    a turning point of $f$ it is easily seen that $\Tn \to \T$ and
    that eventually \DOTHIS{$\fn(\Tn) = f(\T)$}{They both take the value
      either $\bottom$ or $\top$ -- or both of them start outside the
      strip}.

    \renewcommand{\d}{\delta}
    \newcommand{\e}{\epsilon}

    Since $f$ is continuous, choose $\d$ such that
    $|f(\T) - f(x)| \le \epsilon$ when
    $|\T - x| \le \delta$.  Eventually
    \begin{itemize}
    \item $\fn(\Tn) = f(\T)$
    \item $|\Tn - \T| \le \d$
    \item $|\fn - f| \le \e$ uniformly on some compact containing
      $[\starttime, \T+\d]$.
    \end{itemize}

    \newcommand{\stoppedfn}{\Res{\fn}}
    \newcommand{\stoppedf}{\Res{f}}

    \newcommand{\condition}[2]{for $t \in {#1}$ we have
      $|\stoppedfn(t) - \stoppedf(t)| #2$}
    so
    \begin{itemize}
    \item \condition{[\starttime, \T-\d)}{\le \e}
    \item \condition{[\T-\d, \T+\d]}{\le 2\e}
    \item \condition{(\T+\d, \infty)}{= 0}
    \end{itemize}
    so indeed $\stoppedfn \to \stoppedf$ uniformly on compacts.}
      {The only tricky part is the second item.  There are
      four cases to consider.  The worst case is when $\stoppedf$ has
      been truncated and $\stoppedfn$ hasn't.  But $\stoppedf$ is
      equal to the level, and so is within $\e$ of $f$.  OTOH
      $\stoppedfn = \fn$ so is within $\e$ of $f$.  Thus the $2\e$
      bound.}
\end{proof}

Observe that sample paths of Brownian motion $\sampled$ almost surely
satisfy the condition of the lemma, that
``\stripleavetimenotturningpoint{\sampled}''.  This allows us to reach
the desired convergence result.

\begin{lemma}
  $\Res{\resamplede} \toinP \Res{\sampled}$ as $\epsilon \to 0$
\end{lemma}

\begin{proof}
  We already know that $\resamplede \toinP \sampled$, and in addition
  the probability that $f \mapsto \Res{f}$ is continuous at $X$ is $1$
  (by Lemma \ref{lem:Res-continuous-ae}).
  So we conclude that $\Res{\resamplede} \toinP
  \Res{\sampled}$ by the continuous mapping theorem (see for
  example \cite{billingsley}, p. 21, Theorem 2.7).
\end{proof}

As in Section \ref{recovering-from-half-planes} we can conclude that

\begin{lemma}
  $\Res{\sampled}$ is $\factor{\bottom}{0} \tensor
  \factor{0}{\top}$-measurable.
\end{lemma}

\subsection{What does this mean in terms of noises?}

As before we can conclude that

\begin{theorem}
  $\factor{\bottom}{\top} = \factor{\bottom}{0} \tensor \factor{0}{\top}$
\end{theorem}

There was nothing special about the split between the strips being at
level $0$, so in fact we have shown that

\begin{cor}
  $\factor{x}{z} = \factor{x}{y} \tensor \factor{y}{z}$ for all $x < y < z$
\end{cor}

\begin{theorem}
  The \brownianwebnoise{}
  is a continuous product of probability spaces in the sense that
  for each $x \le y \le z$, $\factor{x}{y} \tensor \factor{y}{z} =
  \factor{x}{z}$.
  See 3c1 Definition of
  \cite{tsirelson-nonclassical-stochastic-flows}.
\end{theorem}

\begin{theorem}
  The \brownianwebnoise{} is a noise in the sense that it is a
  continuous product of probability spaces with a translation.
  See 3d1 Definition of
  \cite{tsirelson-nonclassical-stochastic-flows}.
\end{theorem}

\FIXME{}{Need to make a comment that the obvious translation works.}

\begin{theorem}
  The collection of two-dimensional sub-$\sigma$-algebras of the
  Brownian web is a two-dimensional noise, and moreover it is black.
\end{theorem}

\begin{proof}
  We know that the one-dimensional noise consisting of the vertical
  collection of sub-$\sigma$-algebras is black.  By general arguments
  on spectral sets this implies that the two-dimensional noise is
  black.  See \cite{tsirelson-classicality-blackness-spectrum}.
\end{proof}

}
